Redis问题与自查
----
<br>
### Redis持久化机制
>RDB持久化
>>RBD实际上是Redis的快照，可以设置相对应的快照规则，如x秒内更改了m次数据库则进行快照；主从复制的时候会快照；但是由于快照有时间间隔，因此数据会少量丢失；
>AOF持久化
>>AOF持久化会把每条从客户端传来的更改类型的命令都进行记录，记录的形式和传递来的一样。AOF持久化到硬盘会调用fork()方法，默认是由操作系统自动从内存flush到硬盘，时间30s，但是30s不能保证数据的安全性因此，可以手动设置刷新时间为1s。启动Aof会对性能有一定影响。
>>可以对AOF文件进行优化，比如传来了同一key的5次set，那么可以只记录最终的一次，优化也可以根据参数设置频率。
